<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Voice Clone</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
        integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
            <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <style>
        /* General Styles (mostly unchanged) */
        body {
            font-family: 'SF Pro Display', sans-serif;
            margin: 0;
            background: #121212;
            color: #fff;
            line-height: 1.6;
            overflow-x: hidden;
            position: relative;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        section {
            padding: 60px 20px;
            text-align: center;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeIn 1s forwards ease-out;
            transition: padding 0.3s ease;
        }

        section:hover {
            padding: 70px 20px;
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Animated background particles (unchanged) */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .particle {
            position: absolute;
            width: 3px;
            height: 3px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            animation: float 8s infinite linear;
        }

        @keyframes float {
            0% {
                transform: translateY(100vh) translateX(0px);
                opacity: 0;
            }

            10% {
                opacity: 1;
            }

            90% {
                opacity: 1;
            }

            100% {
                transform: translateY(-100px) translateX(100px);
                opacity: 0;
            }
        }

        /* Neural network animation (unchanged) */
        .neural-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            opacity: 0.1;
        }

        .neural-node {
            position: absolute;
            width: 5px;
            height: 5px;
            background: #007aff;
            border-radius: 50%;
            animation: nodeGlow 5s ease-in-out infinite;
        }

        @keyframes nodeGlow {
            0%,
            100% {
                opacity: 0.3;
                transform: scale(1);
            }

            50% {
                opacity: 1;
                transform: scale(1.3);
            }
        }

        /* Landing Page (Home) (unchanged) */
        .landing-page {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
            padding: 20px;
            z-index: 2;
            background: linear-gradient(to bottom, rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.6));
        }

        .hero-content {
            flex: 1;
            padding: 20px;
            text-align: center;
            z-index: 3;
        }

        .hero-content h1 {
            font-size: 4em;
            font-weight: 600;
            letter-spacing: -0.02em;
            color: #fff;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .hero-content p {
            font-size: 1.5em;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 40px;
            line-height: 1.4;
        }

        .hero-content .cta-button {
            padding: 0;
            border: none;
            background: none;
            cursor: pointer;
            display: inline-block;
            text-align: center;
            margin-top: 15px;
        }

        .hero-content .cta-button.glow-on-hover {
            width: 280px;
            height: 70px;
            font-size: 1.3em;
            line-height: 70px;
            font-weight: 500;
        }

        .hero-video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 1;
            opacity: 0.5;
        }

        .hero-video video {
            min-width: 100%;
            min-height: 100%;
            width: auto;
            height: auto;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            object-fit: cover;
        }

        /* Enhanced Clone Section Styles (MODIFIED) */
        .clone-section {
            position: relative;
            z-index: 2;
            max-width: 1000px;
            margin: 50px auto;
            padding: 60px;
            border-radius: 30px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.08);
            overflow: hidden;
            background: linear-gradient(to bottom, #1e1e1e, #282828);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
        }

        .clone-section:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.5);
        }

        .clone-section h2 {
            font-size: 2.5em;
            margin-bottom: 30px;
            color: #eee;
            text-shadow: 0 3px 5px rgba(0, 0, 0, 0.5);
        }

        /* REMOVE Aurora Effect */
        .clone-section::before {
            content: none;
        }

        @keyframes auroraShift {
            0% {
                transform: translateX(-30%) translateY(-20%);
            }

            100% {
                transform: translateX(30%) translateY(20%);
            }
        }

        .clone-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: stretch;
        }

        /* Enhanced Record and Text Input Styles */
        .record-section,
        .text-input-area {
            flex: 1;
            min-width: 350px;
            padding: 65px;
            margin: 15px;
            box-sizing: border-box;
            text-align: center;
            background: rgba(30, 30, 30, 0.5);
            border-radius: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transition: transform 0.2s ease, border 0.3s ease;
            /* Add transition for border */
        }

        .record-section:hover,
        .text-input-area:hover {
            transform: translateY(-3px);
            border: 2px solid #007bff;
            /* Neon blue border */
            box-shadow: 0 5px 15px rgba(0, 123, 255, 0.5);
            /* Neon blue glow */
        }

        .record-section h3,
        .text-input-area h3 {
            font-size: 1.8em;
            margin-bottom: 20px;
            color: #ddd;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
        }

        .text-input-area textarea {
            width: 100%;
            padding: 20px;
            font-size: 1.1em;
            border: none;
            border-radius: 15px;
            background: rgba(40, 40, 40, 0.8);
            color: #fff;
            outline: none;
            box-shadow: inset 0 3px 10px rgba(0, 0, 0, 0.5);
            transition: background 0.3s ease;
            height: 150px;
        }

        .text-input-area textarea:focus {
            background: rgba(50, 50, 50, 0.9);
        }

        /* Glowing Button (Slightly Modified) */
        .glow-on-hover {
            width: 280px;
            height: 70px;
            border: none;
            outline: none;
            color: #fff;
            background: #333;
            cursor: pointer;
            position: relative;
            z-index: 1;
            border-radius: 20px;
            font-weight: 600;
            font-size: 1.3em;
            letter-spacing: 0.06em;
            transition: transform 0.2s ease;
        }

        .glow-on-hover:before {
            content: '';
            background: linear-gradient(45deg, #64b5f6, #81c784, #ba68c8, #e57373, #64b5f6);
            position: absolute;
            top: -3px;
            left: -3px;
            background-size: 400%;
            z-index: -1;
            filter: blur(8px);
            width: calc(100% + 6px);
            height: calc(100% + 6px);
            animation: glowing 20s linear infinite;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
            border-radius: 20px;
        }

        .glow-on-hover:hover {
            transform: scale(1.07);
        }

        .glow-on-hover:active {
            color: #000
        }

        .glow-on-hover:active:after {
            background: transparent;
        }

        .glow-on-hover:hover:before {
            opacity: 1;
        }

        .glow-on-hover:after {
            z-index: -1;
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: #333;
            left: 0;
            top: 0;
            border-radius: 20px;
        }

        @keyframes glowing {
            0% {
                background-position: 0 0;
            }

            50% {
                background-position: 400% 0;
            }

            100% {
                background-position: 0 0;
            }
        }

        /* Voice Recording Section Enhancements */
        .record-button {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            border: none;
            background: linear-gradient(45deg, #29b6f6, #4db6ac);
            color: white;
            font-size: 1.4rem;
            cursor: pointer;
            position: relative;
            margin: 25px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 8px 22px rgba(41, 182, 246, 0.5);
        }

        .record-button:hover {
            transform: scale(1.15);
            box-shadow: 0 10px 25px rgba(41, 182, 246, 0.6);
        }

        .record-button.recording {
            animation: pulse 1.5s infinite;
            background: linear-gradient(45deg, #f44336, #ff9800);
            box-shadow: 0 0 35px rgba(244, 67, 54, 0.7);
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(244, 67, 54, 0.5);
            }

            70% {
                box-shadow: 0 0 0 25px rgba(244, 67, 54, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(244, 67, 54, 0);
            }
        }

        /* Other styles (unchanged or slightly adjusted) */

        @media (max-width: 768px) {
            /* Responsive styles (mostly unchanged) */
            section {
                padding: 40px 15px;
            }

            .hero-content h1 {
                font-size: 3em;
            }

            .hero-content p {
                font-size: 1.2em;
            }

            .hero-content .cta-button.glow-on-hover {
                width: 220px;
                height: 60px;
                font-size: 1.1em;
                line-height: 60px;
            }

            .clone-section {
                padding: 30px;
                margin: 30px auto;
            }

            .clone-container {
                flex-direction: column;
                /* Stack sections on smaller screens */
            }

            .record-section,
            .text-input-area {
                min-width: auto;
                /* Allow full width */
                margin: 10px 0;
                /* Adjust margins */
            }

            textarea {
                width: 90%;
                padding: 15px;
                font-size: 1em;
                height: 120px;
            }

            .glow-on-hover {
                width: 200px;
                height: 50px;
                font-size: 1em;
            }

            .record-button {
                width: 100px;
                height: 100px;
                font-size: 1em;
            }

            .visualizer {
                height: 50px;
            }
#loading {
    display: none !important;
}

        }
    </style>
</head>

<body>
    <!-- Animated background particles (unchanged) -->
    <div class="particles" id="particles"></div>

    <!-- Neural network background (unchanged) -->
    <div class="neural-bg" id="neuralBg"></div>

    <!-- Landing Page (Home) (unchanged) -->
    <section id="home" class="landing-page">
        <div class="hero-content">
            <h1>Unlock the Power of AI Voice</h1>
            <p>Create stunningly realistic voice clones with ease. Transform any text into lifelike speech using advanced AI.</p>
            <a href="#clone" class="cta-button glow-on-hover">Get Started</a>
        </div>
        <div class="hero-video">
    <video src="{{ url_for('static', filename='landingpage.mp4') }}" autoplay loop muted></video>
        </div>
    </section>

    <!-- Voice Cloning Section -->
    <section id="clone" class="clone-section">
        <h2>AI Voice Cloning</h2>

        <div class="clone-container">
            <div class="record-section">
                <h3>Record Your Voice</h3>
                <p style="margin-bottom: 30px; color: rgba(255,255,255,0.7);">
                    Record a 10-second sample to create your unique voice clone.
                </p>

                <button class="record-button" id="recordBtn">
                    <span id="recordText">🎤 Record</span>
                </button>

                <!-- Voice visualizer -->
                <div class="visualizer" id="visualizer"></div>

                <div class="status" id="recordStatus" style="display: none;"></div>

                <!-- Recorded audio playback -->
                <div class="audio-player" id="recordedAudio" style="display: none;">
                    <div class="audio-controls">
                        <h3>Your Recording</h3>
                        <audio controls style="width: 100%; max-width: 400px;">
                            <source id="audioSource" type="audio/wav">
                        </audio>
                    </div>
                </div>
            </div>

            <div class="text-input-area">
                <h3>Generate AI Voice</h3>
                <p style="margin-bottom: 20px; color: rgba(255,255,255,0.7);">
                    Enter text to generate realistic speech using your cloned voice.
                </p>
                <textarea id="textInput" placeholder="Enter text to speak"></textarea>
            </div>
        </div>

        <button class="glow-on-hover" id="generateBtn">Generate Voice</button>

        <div class="loading" id="loading">
            <div class="loading-spinner"></div>
            <p>Generating Cloned Voice...</p>
        </div>

        <div class="status" id="generateStatus" style="display: none;"></div>

        <!-- Generated audio playback -->
        <div class="audio-player" id="generatedAudio" style="display: none;">
            <div class="audio-controls">
                <h3>Generated Voice</h3>
                <audio controls style="width: 100%; max-width: 400px;">
                    <source id="generatedAudioSource" type="audio/wav">
                </audio>
            </div>
        </div>
    </section>

    <!-- About Section (unchanged) -->
    <section id="about" class="about-section">
        <h2>Imagine hearing your words in a voice that feels familiar.</h2>
        <p>With AI Voice Cloning, we capture the subtle tone, warmth, and personality of any voice you choose — so it doesn’t just sound real, it feels real. Whether it’s bringing back the voice of a loved one (with their permission), giving your characters a unique voice, or adding a personal touch to your projects, our technology makes it effortless. All it takes is a short audio sample, and your voice can speak any text, in any language, with the same heart and expression that makes it yours</p>
    </section>

    <!-- Contact Section (unchanged) -->
    <section id="contact" class="contact-section">
        <h2>Why Voice Cloning Matters</h2>
        <p>Voice is more than sound  it’s identity, emotion, and connection. Our AI Voice Cloning technology isn’t just about mimicking speech; it’s about preserving the unique qualities that make a voice special. From creating personalized experiences in games and virtual assistants, to producing natural-sounding narrations for content creators, to helping people with speech impairments regain their voice, the possibilities are endless. Every project is built with consent, respect, and privacy at its core, so the technology empowers rather than exploits</p>
    </section>

    <footer>
        <p>&copy; 2025 AI Voice Clone</p>
    </footer>

    <script>
        // JavaScript code (mostly unchanged)
        // Global variables
        let mediaRecorder;
        let audioChunks = [];
        let isRecording = false;
        let recordingTimer;
        let visualizerInterval;

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function () {
            document.getElementById('loading').style.display = 'none'; // Force hide on load

            initializeParticles();
            initializeNeuralNetwork();
            initializeVoiceVisualizer();
            setupEventListeners();
            observeSections(); // Initialize section observer
        });

        // Create floating particles
        function initializeParticles() {
            const particlesContainer = document.getElementById('particles');

            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 6 + 's';
                particle.style.animationDuration = (Math.random() * 3 + 4) + 's';
                particlesContainer.appendChild(particle);
            }
        }

        // Create neural network background
        function initializeNeuralNetwork() {
            const neuralBg = document.getElementById('neuralBg');

            for (let i = 0; i < 20; i++) {
                const node = document.createElement('div');
                node.className = 'neural-node';
                node.style.left = Math.random() * 100 + '%';
                node.style.top = Math.random() * 100 + '%';
                node.style.animationDelay = Math.random() * 4 + 's';
                neuralBg.appendChild(node);
            }
        }

        // Initialize voice visualizer bars
        function initializeVoiceVisualizer() {
            const visualizer = document.getElementById('visualizer');

            for (let i = 0; i < 20; i++) {
                const bar = document.createElement('div');
                bar.className = 'bar';
                bar.style.height = '5px';
                visualizer.appendChild(bar);
            }
        }

        // Setup event listeners
        function setupEventListeners() {
            document.getElementById('recordBtn').addEventListener('click', toggleRecording);
            document.getElementById('generateBtn').addEventListener('click', generateVoice);
        }

        // Observe Sections for Animation
        function observeSections() {
            const sections = document.querySelectorAll('section');

            const observer = new IntersectionObserver(entries => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.animationPlayState = 'running';
                        observer.unobserve(entry.target);
                    }
                });
            }, {
                threshold: 0.2 // Trigger when 20% of the section is visible
            });

            sections.forEach(section => {
                section.style.animationPlayState = 'paused'; // Initially paused
                observer.observe(section);
            });
        }

        // Toggle recording function
        async function toggleRecording() {
            if (!isRecording) {
                await startRecording();
            } else {
                stopRecording();
            }
        }

        // Start recording
async function startRecording() {
    try {
        const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
        mediaRecorder = new MediaRecorder(stream);
        audioChunks = [];

        // FIX: Define the onstop event handler BEFORE starting the recording
        mediaRecorder.onstop = () => {
            const audioBlob = new Blob(audioChunks, { type: 'audio/wav' });
            const audioUrl = URL.createObjectURL(audioBlob);
            const audioSource = document.getElementById('audioSource');
            const recordedAudioPlayer = document.getElementById('recordedAudio');
            const audioControl = recordedAudioPlayer.querySelector('audio');

            audioSource.src = audioUrl;
            audioControl.load(); // Tell the player to load the new source
            recordedAudioPlayer.style.display = 'block';

            // Now, upload to the backend
            const formData = new FormData();
            formData.append('audio_file', audioBlob, 'recording.wav');
            showStatus('recordStatus', 'Uploading voice sample...', 'success');
            fetch('http://127.0.0.1:5000/upload-voice', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.error) {
                    showStatus('recordStatus', `Upload failed: ${data.error}`, 'error');
                } else {
                    showStatus('recordStatus', 'Voice sample uploaded successfully!', 'success');
                }
            })
            .catch(error => {
                showStatus('recordStatus', 'Upload failed. Is the server running?', 'error');
            });
        };

        mediaRecorder.ondataavailable = event => {
            audioChunks.push(event.data);
        };

        mediaRecorder.start();
        isRecording = true;

        // Update UI
        const recordBtn = document.getElementById('recordBtn');
        const recordText = document.getElementById('recordText');
        recordBtn.classList.add('recording');
        recordText.textContent = '⏹️ Stop';
        startVisualizer();

        recordingTimer = setTimeout(() => {
            stopRecording();
        }, 10000);

        showStatus('recordStatus', 'Recording... (10 seconds max)', 'success');

    } catch (error) {
        console.error('Error accessing microphone:', error);
        showStatus('recordStatus', 'Error accessing microphone. Please check permissions.', 'error');
    }
}

function stopRecording() {
    if (mediaRecorder && isRecording) {
        mediaRecorder.stop(); // This now triggers the onstop handler defined above
        mediaRecorder.stream.getTracks().forEach(track => track.stop());
        isRecording = false;

        const recordBtn = document.getElementById('recordBtn');
        const recordText = document.getElementById('recordText');
        recordBtn.classList.remove('recording');
        recordText.textContent = '🎤 Record';
        stopVisualizer();

        if (recordingTimer) {
            clearTimeout(recordingTimer);
        }
    }
}


        // Start visualizer animation
        function startVisualizer() {
            const bars = document.querySelectorAll('.bar');

            visualizerInterval = setInterval(() => {
                bars.forEach(bar => {
                    const height = Math.random() * 40 + 5;
                    bar.style.height = height + 'px';
                    // Apply the even/odd bar rotation
               
                    // Apply the even/odd bar rotation
                    if (Array.from(bars).indexOf(bar) % 2 === 0) {
                        bar.style.transform = 'rotateX(20deg)';
                    } else {
                        bar.style.transform = 'rotateX(-20deg)';
                    }
                });
            }, 100);
        }

        // Stop visualizer animation
        function stopVisualizer() {
            if (visualizerInterval) {
                clearInterval(visualizerInterval);
            }

            const bars = document.querySelectorAll('.bar');
            bars.forEach(bar => {
                bar.style.height = '5px';
                bar.style.transform = 'rotateX(0deg)';
            });
        }

async function generateVoice() {
    const textInput = document.getElementById('textInput');
    const text = textInput.value.trim();
    
    const recordedAudioSrc = document.getElementById('audioSource').src;
    if (!recordedAudioSrc.startsWith('blob:')) {
         showStatus('generateStatus', 'Please record your voice first!', 'error');
         return;
    }

    if (!text) {
        showStatus('generateStatus', 'Please enter some text to generate speech.', 'error');
        return;
    }

    // Show loading animation
    document.getElementById('generateBtn').disabled = true;
    document.getElementById('generatedAudio').style.display = 'none';

    try {
        document.getElementById('loading').style.display = 'block';
        const response = await fetch('http://127.0.0.1:5000/generate-speech', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ text: text })
        });
        
        const data = await response.json();

        if (data.error) {
            throw new Error(data.error);
        }

        const generatedAudioUrl = `http://127.0.0.1:5000${data.audioUrl}`;
        
        const generatedAudioSource = document.getElementById('generatedAudioSource');
        generatedAudioSource.src = generatedAudioUrl;

        const audioPlayer = document.querySelector('#generatedAudio audio');
        audioPlayer.load();

        showStatus('generateStatus', 'AI voice generated successfully!', 'success');
         // Make sure the audio player is visible
        document.getElementById('generatedAudio').style.display = 'block';

    } catch (error) {
        console.error('Error generating voice:', error);
        showStatus('generateStatus', `Error: ${error.message}`, 'error');
    } finally {
        // Hide loading animation
        document.getElementById('loading').style.display = 'none';
        document.getElementById('generateBtn').disabled = false;
    }
}

        // Simulate AI processing with delay
        function simulateAIProcessing() {
            return new Promise(resolve => {
                setTimeout(resolve, 3000);
            });
        }

        // Show status message
        function showStatus(elementId, message, type) {
            const statusElement = document.getElementById(elementId);
            statusElement.textContent = message;
            statusElement.className = `status ${type}`;
            statusElement.style.display = 'block';

            // Hide after 5 seconds
            setTimeout(() => {
                statusElement.style.display = 'none';
            }, 5000);
        }

        // Load voices when available
        speechSynthesis.addEventListener('voiceschanged', () => {
            // Voices are now loaded
        });
    </script>
</body>

</html>